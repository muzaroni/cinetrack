name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Inject Secrets
        run: |
          # Use 'sed' to replace process.env.VAR with the actual secret values in your JS/TS files
          sed -i "s|process.env.FIREBASE_API_KEY|'${{ secrets.FIREBASE_API_KEY }}'|g" services/firebaseService.ts
          sed -i "s|process.env.FIREBASE_PROJECT_ID|'${{ secrets.FIREBASE_PROJECT_ID }}'|g" services/firebaseService.ts
          # ... repeat for all variables ...
          sed -i "s|process.env.API_KEY|'${{ secrets.GEMINI_API_KEY }}'|g" services/geminiService.ts

      - name: Setup Pages
        uses: actions/configure-pages@v4
      
      # Add your build steps here (e.g., npm install && npm run build)
      # Then deploy the output folder
